#!/bin/sh

DOE_HOME=~/.doe
DOE_MODULES=$DOE_HOME/lib
RED='\033[0;31m'	# Cyan color 
NC='\033[0m'		# No Color

CALL_MODULE='call_doe_module $1 $2'
CALL_FUNCTION='call_doe_module $(basename $BASH_SOURCE).$1'

# Help printed for file where it was called ($BASH_SOURCE)
# i.e.
#	doe help	- print help for main file doe
#	doe gcloud help	- print help for module file gcloud
# Called as:
#	eval ${HELP}
HELP='call_doe_module help $BASH_SOURCE'


# Call module and functions files with  additional parametr
call_doe_module()
{
    source ${DOE_MODULES}/${1} ${2:-help}
}



case ${1:-verify} in
	verify) # Verify all known environments
		call_doe_module verify ${2:-all}
		;;
	vagrant) # "doe" vagrant module commands
		eval ${CALL_MODULE}
		;;
	gcloud)	# "doe" Google Cloud Platform module commands
		eval ${CALL_MODULE}
		;;
	comp)
		echo "verify vagrant gcloud help"
		;;
	help|*) # Print this help
		eval ${HELP}
		;;
esac
