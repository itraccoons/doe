#!/bin/sh

set -e

. ~/doe/include/doe.global.variables
. ~/doe/include/doe.common.functions
. ${DOE_CFGDIR}/doe.conf

[ "$1" = "" ] && eval "$0 ${default_command}"

mod=$1
shift

case "${mod}" in
	help) # Print this help
		eval "${NOCOMPLETION}"
		show_help "${BASH_SOURCE[0]}"
		echo "\n\t\$mod = { $(list_modules)}"
		;;
	version) # Show version
		eval "${NOCOMPLETION}"
		show_version
		;;
	completion)
		list_modules
		;;
	$mod) # Run module
		eval "${CALL_MODULE}" || eval "$0 help"
		;;
esac
