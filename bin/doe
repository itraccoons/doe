#!/bin/sh

set -e

. ~/doe/include/doe.global.variables
. ~/doe/include/doe.common.functions
. ${DOE_CFGDIR}/doe.conf

mod=$1
shift

case "${mod:-verify}" in
	.self) # Make yourself module
		eval "${CALL_MODULE}"
		;;
	verify) # Verify all known environments
		call_doe_module verify "${1:-all}"
		;;
	vagrant) # vagrant module commands
		eval "${CALL_MODULE}"
		;;
	aws) # Google Cloud Platform module commands
		eval "${CALL_MODULE}"
		;;
	gcloud) # Google Cloud Platform module commands
		eval "${CALL_MODULE}"
		;;
	version) # Show version
		eval "${NOCOMPLETION}"
		show_version
		;;
	completion)
		list_modules
		;;
	help|*) # Print this help
		eval "${NOCOMPLETION}"
		show_help "${BASH_SOURCE[0]}"
		;;
esac
