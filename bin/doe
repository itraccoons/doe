#!/bin/sh

set -e

. ~/doe/include/doe.global.variables
. ~/doe/include/doe.common.functions
. ${DOE_CFGDIR}/doe.conf

mod=$1
shift

case "${mod:-verify}" in
	version) # Show version
		eval "${NOCOMPLETION}"
		show_version
		;;
	completion)
		list_modules
		;;
	help) # Print this help
		eval "${NOCOMPLETION}"
		show_help "${BASH_SOURCE[0]}"
		echo "\n\t\$mod = { $(list_modules)}"
		;;
	$mod) # Run module
		eval "${CALL_MODULE}" || show_help "${BASH_SOURCE[0]}"
		;;
esac
