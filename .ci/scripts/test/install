#!/bin/sh

#set -e

DOE="/usr/local/bin/doe"

echo "INSTALL $DOE"
curl -fsSL https://doe.cloud/get | sudo sh	; echo "$? curl -fsSL https://doe.cloud/get | sudo sh"
[ "$(command -v doe)" = "$DOE" ]		; echo "$? [ \"\$(command -v doe)\" = \"$DOE\" ]"
[ -e "$DOE" ]					; echo "$? [ -e \"$DOE\" ]"
[ "$(stat -c "%a" "$DOE")" = 755 ]		; echo "$? [ \"\$(stat -c \"%a\" \"\$DOE\")\" = 755 ]"

echo "CALL $DOE <some>"
[ "$(doe list-modules)" = "create completion " ]; echo "$? [ \"\$(doe list-modules)\" = \"create completion \" ]"
doe create -m mod -f func			; echo "$? doe create -m mod -f func"
[ -e ~/.doe/modules/mod/mod.func ]		; echo "$? [ -e ~/.doe/modules/mod/mod.func ]"

doe mod func					; echo "$? doe mod func"
echo "$_"
