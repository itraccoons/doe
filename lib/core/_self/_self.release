#!/bin/sh

self_release()
{
    DOE_RELEASE="doe_latest.tar.gz"

    [ -d "${DOE_TMPDIR}" ] || mkdir -p "${DOE_TMPDIR}"

    tar	--exclude ".git" \
	--exclude ".gitignore" \
	--exclude ".install" \
	--exclude ".tmp" \
	--exclude "lib/doe-modules/" \
	--exclude "modules/[^a-zA-Z0-9]*" \
	--exclude "${DOE_RELEASE}" \
	-zcvf "${DOE_TMPDIR}/${DOE_RELEASE}" -C "${DOE_BASEDIR}" "${DOE_DIR}"

    echo "Release: ${DOE_TMPDIR}/${DOE_RELEASE}"
}

self_release "$@"
